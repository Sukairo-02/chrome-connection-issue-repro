<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>chrome-connection-issue-reproduction</title>
		<link href="style.css" rel="stylesheet" />
	</head>
	<body>
		<h1>No headers</h1>
		<button id="http" onclick="http()">HTTP</button>
		<button id="https" onclick="https()">HTTPS</button>
		<h1>With headers</h1>
		<button id="http" onclick="http(true)">HTTP</button>
		<button id="https" onclick="https(true)">HTTPS</button>
	</body>
	<script>
		function http(headers) {
			fetch(`http://localhost:3434/${headers ? 'headers' : ''}`, {
				headers: headers
					? {
							'Access-Control-Allow-Private-Network': true
					  }
					: undefined
			})
				.then((res) => res.text().then(console.log))
				.catch((err) => console.error(err.message))
		}

		function https(headers) {
			fetch(`https://localhost:3434/${headers ? 'headers' : ''}`, {
				headers: headers
					? {
							'Access-Control-Allow-Private-Network': true
					  }
					: undefined
			})
				.then((res) => res.text().then(console.log))
				.catch((err) => console.error(err.message))
		}
	</script>
</html>
